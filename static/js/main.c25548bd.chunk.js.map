{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/GalleryLoader/GalleryLoader.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/QueryError/QueryError.module.css","components/Button/Button.module.css","services/image-gallery-api.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/GalleryLoader/GalleryLoader.js","components/QueryError/QueryError.js","components/Modal/Modal.js","components/Button/Button.js","components/App.js","index.js"],"names":["module","exports","imageGalleryApi","fetchImages","query","page","axios","defaults","baseURL","params","key","image_type","orientation","per_page","get","then","response","status","data","hits","length","Promise","reject","Error","Searchbar","state","inputValue","handleInputChange","e","value","currentTarget","setState","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","reset","toast","error","this","className","s","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","onClick","image","webformatURL","tags","largeImageURL","src","alt","ImageGalleryItemImage","ImageGallery","images","map","id","GalleryLoader","color","width","height","GalleryLoaderText","QueryError","queryError","message","modalRoot","document","querySelector","Modal","handleEscKey","code","onClose","handleOverlayClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","Button","App","showLoadMore","showModal","handleFetchImages","prevState","catch","finally","handleScrollDown","formSubmitHandler","handleOpenModal","modalImgUrl","dataset","handleCloseModal","handleLoadMore","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,qC,mBCAhPD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,kBAAoB,2C,mBCA3FD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,aAAe,qC,mBCAjCD,EAAOC,QAAU,CAAC,WAAa,iC,mBCA/BD,EAAOC,QAAU,CAAC,OAAS,yB,oKCsB3B,IAIeC,EAJS,CACtBC,YAnBF,SAAqBC,EAAOC,GAS1B,OARAC,IAAMC,SAASC,QAAf,UAHe,2BAGf,cAA0CJ,EAA1C,iBAAwDC,GACxDC,IAAMC,SAASE,OAAS,CACtBC,IANY,qCAOZC,WAAY,QACZC,YAAa,aACbC,SAAU,IAGLP,IAAMQ,MAAMC,MAAK,SAAAC,GACtB,OAAwB,MAApBA,EAASC,QAAkBD,EAASE,KAAKC,KAAKC,OAAS,EAClDJ,EAASE,KAGXG,QAAQC,OAAO,IAAIC,MAAM,mC,gCC6CrBC,E,4MAxDbC,MAAQ,CACNC,WAAY,I,EAGdC,kBAAoB,SAAAC,GAClB,IAAQC,EAAUD,EAAEE,cAAZD,MAER,EAAKE,SAAS,CAAEL,WAAYG,EAAMG,iB,EAGpCC,aAAe,SAAAL,GACbA,EAAEM,iBAEmC,KAAjC,EAAKT,MAAMC,WAAWS,QAK1B,EAAKC,MAAMC,SAAS,EAAKZ,MAAMC,YAC/B,EAAKY,SALHC,IAAMC,MAAM,8B,EAQhBF,MAAQ,WACN,EAAKP,SAAS,CAAEL,WAAY,M,4CAG9B,WACE,IAAQA,EAAee,KAAKhB,MAApBC,WACAO,EAAoCQ,KAApCR,aAAcN,EAAsBc,KAAtBd,kBAEtB,OACE,wBAAQe,UAAWC,IAAEnB,UAArB,SACE,uBAAMkB,UAAWC,IAAEC,WAAYP,SAAUJ,EAAzC,UACE,wBAAQY,KAAK,SAASH,UAAWC,IAAEG,iBAAnC,SACE,sBAAMJ,UAAWC,IAAEI,sBAAnB,sBAGF,uBACEL,UAAWC,IAAEK,gBACbH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZtB,MAAOH,EACP0B,SAAUzB,a,GA7CE0B,a,iBCuBTC,EA1BU,SAAC,GAGnB,IAFLC,EAEI,EAFJA,QAEI,IADJC,MAASC,EACL,EADKA,aAAcC,EACnB,EADmBA,KAAMC,EACzB,EADyBA,cAE7B,OACE,oBAAIjB,UAAWC,IAAEW,iBAAjB,SACE,qBACEM,IAAKH,EACLI,IAAKH,EACLhB,UAAWC,IAAEmB,sBACb,WAAUH,EACVJ,QAASA,O,iBCSFQ,EAjBM,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,OAAQT,EAAc,EAAdA,QAC9B,OACE,oBAAIb,UAAWC,IAAEoB,aAAjB,SACGC,EAAOC,KAAI,SAAAT,GACV,OACE,cAAC,EAAD,CAAiCA,MAAOA,EAAOD,QAASA,GAAjCC,EAAMU,U,0CCGxBC,EATO,WACpB,OACE,sBAAKzB,UAAWC,IAAEwB,cAAlB,UACE,cAAC,IAAD,CAAQC,MAAM,UAAUC,MAAM,MAAMC,OAAO,QAC3C,mBAAG5B,UAAWC,IAAE4B,kBAAhB,4B,iBCESC,EARI,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WACpB,OAAO,mBAAG/B,UAAWC,IAAE6B,WAAhB,SAA6BC,EAAWC,W,iBCC3CC,EAAYC,SAASC,cAAc,eAuC1BC,E,4MA5BbC,aAAe,SAAAnD,GACE,WAAXA,EAAEoD,MACJ,EAAK5C,MAAM6C,W,EAIfC,mBAAqB,SAAAtD,GACfA,EAAEE,gBAAkBF,EAAEuD,QACxB,EAAK/C,MAAM6C,W,uDAhBf,WACEG,OAAOC,iBAAiB,UAAW5C,KAAKsC,gB,kCAG1C,WACEK,OAAOE,oBAAoB,UAAW7C,KAAKsC,gB,oBAe7C,WACE,IAAQG,EAAuBzC,KAAvByC,mBAER,OAAOK,uBACL,qBAAK7C,UAAWC,IAAE6C,QAASjC,QAAS2B,EAApC,SACE,qBAAKxC,UAAWC,IAAEmC,MAAlB,SAA0BrC,KAAKL,MAAMqD,aAEvCd,O,GA5BctB,a,iBCQLqC,EAZA,SAAC,GAAiB,IAAfnC,EAAc,EAAdA,QAChB,OACE,wBAAQA,QAASA,EAASb,UAAWC,IAAE+C,OAAvC,wBC2IWC,E,4MArIblE,MAAQ,CACNrB,MAAO,GACPa,OAAQ,OACRZ,KAAM,EACN2D,OAAQ,GACR4B,cAAc,EACdC,WAAW,EACXrD,MAAO,M,EAiBTsD,kBAAoB,SAAC1F,EAAOC,GAC1BH,EACGC,YAAYC,EAAOC,GACnBU,MAAK,YAAe,IAAZI,EAAW,EAAXA,KACHA,EAAKC,OAAS,IAChB,EAAKW,SAAS,CACZ6D,cAAc,IAIlB,EAAK7D,UAAS,SAAAgE,GAAS,MAAK,CAC1B/B,OAAO,GAAD,mBAAM+B,EAAU/B,QAAhB,YAA2B7C,IACjCF,OAAQ,WACRZ,KAAM0F,EAAU1F,KAAO,EACvBuF,cAAc,SAGjBI,OAAM,SAAAxD,GAAK,OACV,EAAKT,SAAS,CACZS,QACAvB,OAAQ,gBAGXgF,SAAQ,WACP,EAAKC,uB,EAIXC,kBAAoB,SAAAzE,GAClB,EAAKK,SAAS,CAAE3B,MAAOsB,K,EAGzB0E,gBAAkB,SAAAxE,GAChB,IAAMyE,EAAczE,EAAEuD,OAAOmB,QAAQ1C,IAErC,EAAK7B,SAAS,CACZsE,YAAaA,EACbR,WAAW,K,EAIfU,iBAAmB,WACjB,EAAKxE,SAAS,CACZ8D,WAAW,K,EAIfW,eAAiB,WACf,MAAwB,EAAK/E,MAArBrB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,KACf,EAAKyF,kBAAkB1F,EAAOC,I,EAGhC6F,iBAAmB,WACjBd,OAAOqB,SAAS,CACdC,IAAK9B,SAAS+B,gBAAgBC,aAC9BC,SAAU,Y,wDArEd,SAAmBC,EAAWf,GAC5B,GAAIA,EAAU3F,QAAUqC,KAAKhB,MAAMrB,MAAO,CACxCqC,KAAKV,SAAS,CACZd,OAAQ,UACRZ,KAAM,EACN2D,OAAQ,KAGV,MAAwBvB,KAAKhB,MAArBrB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,KAEfoC,KAAKqD,kBAAkB1F,EAAOC,M,oBA+DlC,WACE,MAA0DoC,KAAKhB,MAAvDuC,EAAR,EAAQA,OAAQ/C,EAAhB,EAAgBA,OAAQuB,EAAxB,EAAwBA,MAAOqD,EAA/B,EAA+BA,UAAWQ,EAA1C,EAA0CA,YAClCF,EAAyD1D,KAAzD0D,kBAAmBC,EAAsC3D,KAAtC2D,gBAAiBG,EAAqB9D,KAArB8D,iBAE5C,MAAe,SAAXtF,EAEA,qCACE,cAAC,EAAD,CAAWoB,SAAU8D,IACrB,cAAC,IAAD,CAAgBY,UAAW,SAKlB,YAAX9F,EAEA,qCACE,cAAC,EAAD,CAAWoB,SAAU8D,IACrB,cAAC,EAAD,IAFF,OAOW,aAAXlF,EAEA,qCACE,cAAC,EAAD,CAAWoB,SAAU8D,IACrB,cAAC,EAAD,CAAY1B,WAAYjC,IACxB,cAAC,IAAD,CAAgBuE,UAAW,SAKlB,aAAX9F,EAEA,qCACE,cAAC,EAAD,CAAWoB,SAAU8D,IACrB,cAAC,EAAD,CAAcnC,OAAQA,EAAQT,QAAS6C,IACtCP,GACC,cAAC,EAAD,CAAOZ,QAASsB,EAAhB,SACE,qBAAK3C,IAAKyC,EAAaxC,IAAI,OAG/B,cAAC,EAAD,CAAQN,QAASd,KAAK+D,iBACtB,cAAC,IAAD,CAAgBO,UAAW,cAXjC,M,GApHc1D,aCNlB2D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtC,SAASuC,eAAe,W","file":"static/js/main.c25548bd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1sRW4\",\"SearchForm\":\"Searchbar_SearchForm__3YBAY\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1eNRj\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3E3aK\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3Jkoc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__PQwWA\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__SZ4wG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GalleryLoader\":\"GalleryLoader_GalleryLoader__1dA13\",\"GalleryLoaderText\":\"GalleryLoader_GalleryLoaderText__NpM4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__27wXa\",\"Modal\":\"Modal_Modal__aoEy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2ESvS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueryError\":\"QueryError_QueryError__QaBh_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2kKm1\"};","import axios from 'axios';\n\nconst API_KEY = '22025483-02f71c6158d17e06d5b927dc1';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(query, page) {\n  axios.defaults.baseURL = `${BASE_URL}?q=${query}&page=${page}`;\n  axios.defaults.params = {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    per_page: 12,\n  };\n\n  return axios.get().then(response => {\n    if (response.status === 200 && response.data.hits.length > 0) {\n      return response.data;\n    }\n\n    return Promise.reject(new Error('Oops nothing was found :('));\n  });\n}\n\nconst imageGalleryApi = {\n  fetchImages,\n};\n\nexport default imageGalleryApi;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    inputValue: '',\n  };\n\n  handleInputChange = e => {\n    const { value } = e.currentTarget;\n\n    this.setState({ inputValue: value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.inputValue.trim() === '') {\n      toast.error('Please, enter your query!');\n      return;\n    }\n\n    this.props.onSubmit(this.state.inputValue);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ inputValue: '' });\n  };\n\n  render() {\n    const { inputValue } = this.state;\n    const { handleSubmit, handleInputChange } = this;\n\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={inputValue}\n            onChange={handleInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({\n  onClick,\n  image: { webformatURL, tags, largeImageURL },\n}) => {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        className={s.ImageGalleryItemImage}\n        data-src={largeImageURL}\n        onClick={onClick}\n      ></img>\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.shape({\n    webformatURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n  }),\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClick }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(image => {\n        return (\n          <ImageGalleryItem key={image.id} image={image} onClick={onClick} />\n        );\n      })}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape),\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './GalleryLoader.module.css';\n\nconst GalleryLoader = () => {\n  return (\n    <div className={s.GalleryLoader}>\n      <Loader color=\"#A9A9A9\" width=\"100\" height=\"100\" />\n      <p className={s.GalleryLoaderText}>Loading...</p>\n    </div>\n  );\n};\n\nexport default GalleryLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './QueryError.module.css';\n\nconst QueryError = ({ queryError }) => {\n  return <p className={s.QueryError}>{queryError.message}</p>;\n};\n\nQueryError.propTypes = {\n  queryError: PropTypes.object,\n};\n\nexport default QueryError;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleEscKey);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleEscKey);\n  }\n\n  handleEscKey = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { handleOverlayClick } = this;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={handleOverlayClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button onClick={onClick} className={s.Button}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport imageGalleryApi from '../services/image-gallery-api';\n\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport GalleryLoader from './GalleryLoader';\nimport QueryError from './QueryError';\nimport Modal from './Modal';\nimport Button from './Button';\n\nclass App extends Component {\n  state = {\n    query: '',\n    status: 'idle',\n    page: 1,\n    images: [],\n    showLoadMore: false,\n    showModal: false,\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.query !== this.state.query) {\n      this.setState({\n        status: 'pending',\n        page: 1,\n        images: [],\n      });\n\n      const { query, page } = this.state;\n\n      this.handleFetchImages(query, page);\n    }\n  }\n\n  handleFetchImages = (query, page) => {\n    imageGalleryApi\n      .fetchImages(query, page)\n      .then(({ hits }) => {\n        if (hits.length < 12) {\n          this.setState({\n            showLoadMore: false,\n          });\n        }\n\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          status: 'resolved',\n          page: prevState.page + 1,\n          showLoadMore: true,\n        }));\n      })\n      .catch(error =>\n        this.setState({\n          error,\n          status: 'rejected',\n        }),\n      )\n      .finally(() => {\n        this.handleScrollDown();\n      });\n  };\n\n  formSubmitHandler = inputValue => {\n    this.setState({ query: inputValue });\n  };\n\n  handleOpenModal = e => {\n    const modalImgUrl = e.target.dataset.src;\n\n    this.setState({\n      modalImgUrl: modalImgUrl,\n      showModal: true,\n    });\n  };\n\n  handleCloseModal = () => {\n    this.setState({\n      showModal: false,\n    });\n  };\n\n  handleLoadMore = () => {\n    const { query, page } = this.state;\n    this.handleFetchImages(query, page);\n  };\n\n  handleScrollDown = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { images, status, error, showModal, modalImgUrl } = this.state;\n    const { formSubmitHandler, handleOpenModal, handleCloseModal } = this;\n\n    if (status === 'idle') {\n      return (\n        <>\n          <Searchbar onSubmit={formSubmitHandler} />\n          <ToastContainer autoClose={3000} />\n        </>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <>\n          <Searchbar onSubmit={formSubmitHandler} />\n          <GalleryLoader />;\n        </>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <>\n          <Searchbar onSubmit={formSubmitHandler} />\n          <QueryError queryError={error} />\n          <ToastContainer autoClose={3000} />\n        </>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <Searchbar onSubmit={formSubmitHandler} />\n          <ImageGallery images={images} onClick={handleOpenModal} />\n          {showModal && (\n            <Modal onClose={handleCloseModal}>\n              <img src={modalImgUrl} alt=\"\" />\n            </Modal>\n          )}\n          <Button onClick={this.handleLoadMore} />\n          <ToastContainer autoClose={3000} />\n        </>\n      );\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}